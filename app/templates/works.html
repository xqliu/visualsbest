{% extends 'layout/front_layout.html' %}
{% from "macro/enum_value_search_field.html" import enum_value_search_field %}
{% block main %}


  <div class="layer">
    <div class="search_top">
      <form action="{{ url_for('works') }}" method="post">
        <input type="hidden" name="category_id" id="category_id" value="{{ category.id or '' }}"/>
        <input type="hidden" name="style_id" id="style_id" value="{{ style.id or '' }}"/>
        {{ enum_value_search_field(category, categories, '拍摄类别', 'category') }}
        {{ enum_value_search_field(style, styles, '拍摄风格', 'style') }}
        <div class="search_top_concet">
          <h6>日期</h6>
          <ul class="search_time">
            <li><label>
              <input type="date" name="min_date" value="{{ min_date or '' }}"/>
            </label></li>
            <li class="zhi">至</li>
            <li><label>
              <input type="date" name="max_date" value="{{ max_date or '' }}"/>
            </label></li>
            <li class="zhi">
              <label>
                <input type="checkbox" name="include_none_date" class="include_none"
                       {% if include_none_date == 'on' %}checked{% endif %}>
                <span class="lose-left">包含日期为空的作品集</span>
              </label>
            </li>
          </ul>
        </div>
        <div class="search_top_concet">
          <h6>拍摄价位</h6>
          <ul class="search_time">
            <li><label>
              <input type="number" class="serach_txt" value="{{ min_price or '' }}" name="min_price"/>
            </label></li>
            <li class="zhi">至</li>
            <li><label>
              <input type="number" class="serach_txt" value="{{ max_price or '' }}" name="max_price">
            </label></li>
            <li class="zhi">
              <label>
                <input type="checkbox" name="include_none_price" class="include_none"
                       {% if include_none_price == 'on' %}checked{% endif %}>
                <span class="lose-left">包含价格为空的作品集</span>
              </label>
            </li>
          </ul>
        </div>
        <button type="submit">搜索</button>
      </form>
    </div>
    <div class="demo clearfix">
      <div class="item_list infinite_scroll">
        {% if collections|length > 0 %}
          {% for collection in collections %}
            <div class="item masonry_brick">
              <div class="item_t">
                <div class="img">
                  <a href="{{ url_for('collection_details', collection_id=collection.id) }}">
                    {% if collection.photos|length > 0 %}
                      {% set filename = collection.photos[0].image.path %}
                    {% else %}
                      {% set filename = 'works_01.png' %}
                    {% endif %}
                    <img src="{{ url_for('images', width=246, filename=filename) }}"/>
                  </a>
                </div>
                <div class="title"><span>
                  {{ collection.name }} <br/>
                <span class="small">
                  {% if collection.price != None %} 拍摄价格: ¥{{ collection.price }}{% endif %}
                </span>
                </span></div>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="search_no_result">
            您的搜索条件未返回任何结果，请修改搜索条件重新搜索
          </div>
        {% endif %}
        <!--item end-->
      </div>
      <div id="more"><a href="{{ url_for('works') }}"></a></div>
      <div id="page" class="page" style="display:none;">
        <div class="page_num">
          <span class="unprev"></span>
          <span class="current">1</span>
          <a href="#">&nbsp;2&nbsp;</a>
          <a href="#">&nbsp;3&nbsp;</a>
          <a href="#">&nbsp;4&nbsp;</a>
          <a href="#">&nbsp;5&nbsp;</a>
          <span class="etc"></span>
          <a href="#">12</a>
          <a href="#" class="next"></a>
        </div>
      </div>
    </div>
  </div>
{% endblock %}