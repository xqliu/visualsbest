{% extends 'layout/security_layout.html' %}
{% block main %}
  <div class="login">
    <div class="fixed_login">
      <h3 style="text-align: center">修改密码</h3>
      {% include "security/_messages.html" %}
      <form action="{{ url_for_security('change_password') }}" method="POST"
            name="change_password_form">
        <ul>
          {{ change_password_form.hidden_tag() }}
          <li></li>
          <li><label for="password">当前密码:</label></li>
          <li>
            <input id="password" name="password" type="password" value=""
                   class="txt">
          </li>
          {% if change_password_form.password.errors %}
            {% for error in change_password_form.password.errors %}
              <li class="login_error">{{ error }}</li>
            {% endfor %}
          {% endif %}

          <li><label for="new_password">新密码:</label></li>
          <li>
            <input id="new_password" name="new_password" type="password"
                   value="" class="txt">
          </li>
          {% if change_password_form.new_password.errors %}
            {% for error in change_password_form.new_password.errors %}
              <li class="login_error">{{ error }}</li>
            {% endfor %}
          {% endif %}

          <li><label for="new_password_confirm">再次输入新密码:</label></li>
          <li>
            <input id="new_password_confirm" name="new_password_confirm"
                   type="password" value="" class="txt">
          </li>
          {% if change_password_form.new_password_confirm.errors %}
            {% for error in change_password_form.new_password_confirm.errors %}
              <li class="login_error">{{ error }}</li>
            {% endfor %}
          {% endif %}
          <li class="last-item">
            <button>修改密码</button>
            {{ security_menu(security, url_for_security,
                current_user, "change_password") }}
          </li>
        </ul>
      </form>
    </div>
  </div>
{% endblock %}

